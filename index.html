<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>BoardGameGeek 250</title>
    <link rel="stylesheet" href="./styles.css" id="css-link">
  </head>
  <body>
    <header>
      <div class="wrap">
        <h1>BoardGameGeek 250</h1>
        <div class="controls">
          <label class="control">
            <small>Search</small>
            <input id="search" type="search" placeholder="Title, year..." autocomplete="off" />
          </label>
          
          <button id="filters-toggle" class="filters-toggle" type="button">
            <span class="toggle-icon">▼</span>
            <span class="toggle-text">Show Filters</span>
          </button>
          
          <div id="filters-section" class="filters-section hidden">
            <div class="filters-grid">
              <div class="filter-row">
                <label class="control">
                  <small>Min Weight</small>
                  <select id="min-weight-op">
                    <option value="gte">≥</option>
                    <option value="lte">≤</option>
                    <option value="all">All</option>
                  </select>
                  <input id="min-weight-value" type="number" min="0" max="5" step="0.1" value="0" />
                </label>
                <label class="control">
                  <small>Max Weight</small>
                  <select id="max-weight-op">
                    <option value="lte">≤</option>
                    <option value="gte">≥</option>
                    <option value="all">All</option>
                  </select>
                  <input id="max-weight-value" type="number" min="0" max="5" step="0.1" value="5" />
                </label>
              </div>
              
              <div class="filter-row">
                <label class="control">
                  <small>Min Players</small>
                  <select id="min-players-op">
                    <option value="gte">≥</option>
                    <option value="lte">≤</option>
                    <option value="all">All</option>
                  </select>
                  <input id="min-players-value" type="number" min="1" step="1" value="1" />
                </label>
                <label class="control">
                  <small>Max Players</small>
                  <select id="max-players-op">
                    <option value="lte">≤</option>
                    <option value="gte">≥</option>
                    <option value="all">All</option>
                  </select>
                  <input id="max-players-value" type="number" min="1" step="1" value="100" />
                </label>
              </div>
              
              <div class="filter-row">
                <label class="control">
                  <small>Min Best Players</small>
                  <select id="min-best-players-op">
                    <option value="gte">≥</option>
                    <option value="lte">≤</option>
                    <option value="all">All</option>
                  </select>
                  <input id="min-best-players-value" type="number" min="1" step="1" value="1" />
                </label>
                <label class="control">
                  <small>Max Best Players</small>
                  <select id="max-best-players-op">
                    <option value="lte">≤</option>
                    <option value="gte">≥</option>
                    <option value="all">All</option>
                  </select>
                  <input id="max-best-players-value" type="number" min="1" step="1" value="100" />
                </label>
              </div>
              
              <div class="filter-row">
                <label class="control">
                  <small>Min Playing Time</small>
                  <select id="min-time-op">
                    <option value="gte">≥</option>
                    <option value="lte">≤</option>
                    <option value="all">All</option>
                  </select>
                  <input id="min-time-value" type="number" min="0" step="5" value="0" />
                </label>
                <label class="control">
                  <small>Max Playing Time</small>
                  <select id="max-time-op">
                    <option value="lte">≤</option>
                    <option value="gte">≥</option>
                    <option value="all">All</option>
                  </select>
                  <input id="max-time-value" type="number" min="0" step="5" value="1000" />
                </label>
              </div>
            </div>
          </div>
          
          <span id="summary" class="summary"></span>
        </div>
      </div>
    </header>
    <main>
      <div class="wrap">
        <div style="overflow:auto; border-radius: 8px;">
          <table id="gamesTable" aria-describedby="summary">
            <thead>
              <tr>
                <th class="sortable" data-key="rank">Rank <span class="arrow">▾</span></th>
                <th>Image</th>
                <th class="sortable" data-key="title">Title</th>
                <th class="sortable" data-key="year">Year</th>
                <th class="sortable optional" data-key="geek_rating">Geek</th>
                <th class="sortable optional" data-key="avg_rating">Avg</th>
                <th class="sortable" data-key="num_voters">Voters</th>
                <th class="sortable optional" data-key="min_players">Min P</th>
                <th class="sortable optional" data-key="max_players">Max P</th>
                <th class="sortable optional" data-key="min_best_players">Best Min</th>
                <th class="sortable optional" data-key="max_best_players">Best Max</th>
                <th class="sortable optional" data-key="min_playing_time">Min Time</th>
                <th class="sortable optional" data-key="max_playing_time">Max Time</th>
                <th class="sortable" data-key="weight">Weight</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </main>
    <script>
      (function() {
        // Cache-bust CSS
        const cssLink = document.getElementById('css-link');
        cssLink.href = './styles.css?v=' + Date.now();
        
        // Load viewer.js
        const s = document.createElement('script');
        s.src = './viewer.js?v=' + Date.now(); // dev-only cache busting
        document.body.appendChild(s);
      })();
    </script>
  </body>
  </html>
